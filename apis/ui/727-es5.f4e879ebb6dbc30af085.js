!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(self.webpackChunkui=self.webpackChunkui||[]).push([[727],{10727:function(n,i,u){"use strict";u.r(i),u.d(i,{Customer360Module:function(){return j}});var o=u(38583),c=u(3679),a=u(62831),s=u(95756),l=u(37716),r=u(22238),d=u(51095),Z=u(76627),g=u(1769),v=["customer-details",""],m=function(){var n=function(){function n(){t(this,n)}return e(n,[{key:"ngOnInit",value:function(){}}]),n}();return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["","customer-details",""]],inputs:{customer:"customer"},attrs:v,decls:40,vars:6,consts:[[1,"subtitle"],[1,"row"],[1,"col-md-6"],[1,"d-flex","field"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l._uU(1,"Customer Details"),l.qZA(),l._UZ(2,"mat-divider"),l.TgZ(3,"div",1),l.TgZ(4,"div",2),l.TgZ(5,"div",3),l.TgZ(6,"label"),l._uU(7,"Customer Name :"),l.qZA(),l.TgZ(8,"div"),l._uU(9),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",2),l.TgZ(11,"div",3),l.TgZ(12,"label"),l._uU(13,"Mobile Number :"),l.qZA(),l.TgZ(14,"div"),l._uU(15),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"div",2),l.TgZ(17,"div",3),l.TgZ(18,"label"),l._uU(19,"Gender :"),l.qZA(),l.TgZ(20,"div"),l._uU(21),l.qZA(),l.qZA(),l.qZA(),l.TgZ(22,"div",2),l.TgZ(23,"div",3),l.TgZ(24,"label"),l._uU(25,"Occupation :"),l.qZA(),l.TgZ(26,"div"),l._uU(27),l.qZA(),l.qZA(),l.qZA(),l.TgZ(28,"div",2),l.TgZ(29,"div",3),l.TgZ(30,"label"),l._uU(31,"Address :"),l.qZA(),l.TgZ(32,"div"),l._uU(33),l.qZA(),l.qZA(),l.qZA(),l.TgZ(34,"div",2),l.TgZ(35,"div",3),l.TgZ(36,"label"),l._uU(37,"Status :"),l.qZA(),l.TgZ(38,"div"),l._uU(39),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(9),l.Oqu(null==n.customer?null:n.customer.name),l.xp6(6),l.Oqu(null==n.customer?null:n.customer.mobileNo),l.xp6(6),l.Oqu(null==n.customer?null:n.customer.gender),l.xp6(6),l.Oqu(null==n.customer?null:n.customer.occupation),l.xp6(6),l.Oqu(null==n.customer?null:n.customer.address),l.xp6(6),l.Oqu(null==n.customer?null:n.customer.status))},directives:[g.d],styles:[""]}),n}(),f=u(60974),p=u(58322),A=u(34571),q=u(12542),T=u(11436),h=["account-details",""];function b(t,n){if(1&t){var e=l.EpF();l.TgZ(0,"button",15),l.NdJ("click",function(){l.CHM(e);var t=l.oxw(2).$implicit;return l.oxw(2).repay(t)}),l.TgZ(1,"mat-icon"),l._uU(2,"post_add"),l.qZA(),l.qZA()}}function y(t,n){if(1&t){var e=l.EpF();l.TgZ(0,"div",12),l.YNc(1,b,3,0,"button",13),l.ALo(2,"async"),l.TgZ(3,"button",14),l.NdJ("click",function(){l.CHM(e);var t=l.oxw().$implicit;return l.oxw(2).viewRepaymentList(t)}),l.TgZ(4,"mat-icon"),l._uU(5,"visibility"),l.qZA(),l.qZA(),l.qZA()}if(2&t){var i,u=l.oxw(3);l.xp6(1),l.Q6J("ngIf",null==(i=l.lcZ(2,1,u.roles))?null:i.includes(u.userRole.INVESTOR))}}function _(t,n){1&t&&l._UZ(0,"mat-divider")}var C=function(t,n,e,i){return{"warning-snackbar":t,"success-snackbar":n,"info-snackbar":e,"danger-snackbar":i}};function x(t,n){if(1&t&&(l.TgZ(0,"div",4),l.YNc(1,y,6,3,"div",5),l.TgZ(2,"div",6),l.TgZ(3,"div",7),l.TgZ(4,"div",8),l.TgZ(5,"label"),l._uU(6,"Account Number :"),l.qZA(),l.TgZ(7,"div"),l._uU(8),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",7),l.TgZ(10,"div",8),l.TgZ(11,"label"),l._uU(12,"Amount :"),l.qZA(),l.TgZ(13,"div"),l._uU(14),l.ALo(15,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"div",7),l.TgZ(17,"div",8),l.TgZ(18,"label"),l._uU(19,"Product Name :"),l.qZA(),l.TgZ(20,"div"),l._uU(21),l.ALo(22,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"div",7),l.TgZ(24,"div",8),l.TgZ(25,"label"),l._uU(26,"Interest % :"),l.qZA(),l.TgZ(27,"div"),l._uU(28),l.ALo(29,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(30,"div",7),l.TgZ(31,"div",8),l.TgZ(32,"label"),l._uU(33,"Frequency :"),l.qZA(),l.TgZ(34,"div"),l._uU(35),l.ALo(36,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(37,"div",7),l.TgZ(38,"div",8),l.TgZ(39,"label"),l._uU(40,"Monthly Interest :"),l.qZA(),l.TgZ(41,"div"),l._uU(42),l.ALo(43,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(44,"div",9),l.TgZ(45,"div",8),l.TgZ(46,"label"),l._uU(47,"Status :"),l.qZA(),l.TgZ(48,"div",10),l._uU(49),l.qZA(),l.qZA(),l.qZA(),l.TgZ(50,"div",7),l.TgZ(51,"div",8),l.TgZ(52,"label"),l._uU(53,"Status :"),l.qZA(),l.TgZ(54,"div"),l._uU(55),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(56,_,1,0,"mat-divider",11),l.qZA()),2&t){var e,i,u,o,c,a=n.$implicit,s=n.index,r=l.oxw().ngIf,d=l.oxw();l.xp6(1),l.Q6J("ngIf",(null==a?null:a.status)!==d.accountStatus.REJECTED&&(null==a?null:a.status)!==d.accountStatus.CREATED),l.xp6(7),l.Oqu(null==a?null:a.accountNo),l.xp6(6),l.Oqu(null==(e=l.lcZ(15,11,null==a?null:a.lead))?null:e.amount),l.xp6(7),l.Oqu(null==(i=l.lcZ(22,13,null==a?null:a.product))?null:i.name),l.xp6(7),l.Oqu(null==(u=l.lcZ(29,15,null==a?null:a.product))?null:u.interest),l.xp6(7),l.Oqu(null==(o=l.lcZ(36,17,null==a?null:a.product))?null:o.frequency),l.xp6(7),l.Oqu(null==(c=l.lcZ(43,19,null==a?null:a.lead))?null:c.monthlyInterest),l.xp6(6),l.Q6J("ngClass",l.l5B(21,C,a.status===d.accountStatus.CLOSED,a.status===d.accountStatus.DISBURSED,a.status===d.accountStatus.CREATED,a.status===d.accountStatus.REJECTED)),l.xp6(1),l.hij(" ",null==a?null:a.status," "),l.xp6(6),l.Oqu(null==a?null:a.status),l.xp6(1),l.Q6J("ngIf",s!==r.length-1)}}function U(t,n){if(1&t&&(l.TgZ(0,"div",1),l.TgZ(1,"div",2),l._uU(2,"Account Details"),l.qZA(),l._UZ(3,"mat-divider"),l.YNc(4,x,57,26,"div",3),l.qZA()),2&t){var e=n.ngIf;l.xp6(4),l.Q6J("ngForOf",e)}}var w=function(){var n=function(){function n(e,i,u){t(this,n),this.accountService=e,this.dialog=i,this.authService=u,this.accountStatus=a.dp,this.userRole=a.i4}return e(n,[{key:"ngOnChanges",value:function(t){this.customer&&(this.accounts$=this.accountService.getAccounts({customerId:this.customer.customerId}))}},{key:"ngOnInit",value:function(){this.roles=this.authService.getUserRoles()}},{key:"viewRepaymentList",value:function(t){this.dialog.open(p.u,{width:"65%",data:{accountNo:t.accountNo}})}},{key:"repay",value:function(t){this.dialog.open(f.d,{width:"25%",data:t})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(l.Y36(A.B),l.Y36(r.uw),l.Y36(q.e))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","account-details",""]],inputs:{customer:"customer"},features:[l.TTD],attrs:h,decls:2,vars:3,consts:[["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"subtitle"],["class","account",4,"ngFor","ngForOf"],[1,"account"],["class","floating-action d-flex justify-content-end align-items-center",4,"ngIf"],[1,"row","mt-3","mb-3"],[1,"col-md-6"],[1,"d-flex","field"],[1,"col-md-6","pt-2"],[1,"status",3,"ngClass"],[4,"ngIf"],[1,"floating-action","d-flex","justify-content-end","align-items-center"],["mat-icon-button","","matTooltip","Add Repayment",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","View Repayment",3,"click"],["mat-icon-button","","matTooltip","Add Repayment",3,"click"]],template:function(t,n){1&t&&(l.YNc(0,U,5,1,"div",0),l.ALo(1,"async")),2&t&&l.Q6J("ngIf",l.lcZ(1,1,n.accounts$))},directives:[o.O5,g.d,o.sg,o.mk,d.lW,T.gM,Z.Hw],pipes:[o.Ov],styles:["u[_ngcontent-%COMP%]{color:#0d507e;font-weight:500}u[_ngcontent-%COMP%]:hover{cursor:pointer}.status[_ngcontent-%COMP%]{padding:0 10px;border-radius:15px;color:#fff}.account[_ngcontent-%COMP%]{position:relative}.account[_ngcontent-%COMP%]   .floating-action[_ngcontent-%COMP%]{position:absolute;top:-28px;right:0}"]}),n}(),O=u(6823),I=u.n(O),k=u(75741),S=["investment-vs-interest-collection-chart",""],N=function(t){return{hide:t}},E=function(){var n=function(){function n(e){t(this,n),this.dashboardService=e,this.data={totalInterest:0,totalPrincipal:0}}return e(n,[{key:"ngOnChanges",value:function(t){this.customer&&this.getSendoiDoghnutChartData()}},{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.chart&&this.chart.destroy()}},{key:"getSendoiDoghnutChartData",value:function(){var t=this;this.dashboardService.getRepaymentAgainstInvestmentByCustomerId(this.customer.customerId).subscribe(function(n){t.data=n,t.drawChart()},function(t){console.log(t)})}},{key:"drawChart",value:function(){this.chart&&this.chart.destroy(),this.chart=new(I())(document.getElementById("overall-customer-investment-interest-collection-chart"),{type:"doughnut",data:{labels:["Tatol investment","Interest collection"],datasets:[{label:"Population (millions)",backgroundColor:["#F76B1C","#06D8A4"],data:[this.data.totalPrincipal,this.data.totalInterest]}]},options:{legend:{position:"bottom"},title:{display:!1,text:"Sendoi Against Interest collection"}}})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(l.Y36(k.s))},n.\u0275cmp=l.Xpm({type:n,selectors:[["","investment-vs-interest-collection-chart",""]],inputs:{customer:"customer"},features:[l.TTD],attrs:S,decls:6,vars:6,consts:[[1,"m-2","p-3","bg-white","h-100"],[1,"title","mb-4","text-center","font-500"],[1,"text-center","pt-4","mt-4","font-500","font-banner","no-data",3,"ngClass"],["id","overall-customer-investment-interest-collection-chart",3,"ngClass"]],template:function(t,n){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l._uU(2," Investment Vs Interest Collection "),l.qZA(),l.TgZ(3,"div",2),l._uU(4," No data available! "),l.qZA(),l._UZ(5,"canvas",3),l.qZA()),2&t&&(l.xp6(3),l.Q6J("ngClass",l.VKq(2,N,n.data.totalInterest||n.data.totalPrincipal)),l.xp6(2),l.Q6J("ngClass",l.VKq(4,N,0==n.data.totalInterest&&0==n.data.totalPrincipal)))},directives:[o.mk],styles:[".hide[_ngcontent-%COMP%]{visibility:hidden}.no-data[_ngcontent-%COMP%]{opacity:.3}"]}),n}();function J(t,n){if(1&t&&(l.TgZ(0,"div",6),l.TgZ(1,"div",7),l.TgZ(2,"div",8),l._UZ(3,"div",9),l._UZ(4,"div",10),l.qZA(),l._UZ(5,"div",11),l.qZA(),l.qZA()),2&t){var e=l.oxw();l.xp6(3),l.Q6J("customer",e.selectedCustomer),l.xp6(1),l.Q6J("customer",e.selectedCustomer),l.xp6(1),l.Q6J("customer",e.selectedCustomer)}}var P,D=function(){var n=function(){function n(e){t(this,n),this.dialog=e,this.customerCtrl=new c.NI("",c.kI.required)}return e(n,[{key:"ngOnInit",value:function(){}},{key:"selectCustomer",value:function(){var t=this;this.dialog.open(s.t,{data:{query:{status:a.WE.ACTIVE}},width:"65%"}).afterClosed().subscribe(function(n){n&&(t.selectedCustomer=n,t.customerCtrl.setValue(n.customerId))})}}]),n}();return n.\u0275fac=function(t){return new(t||n)(l.Y36(r.uw))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-customer360-layout"]],decls:8,vars:1,consts:[[1,"m-4","bg-white"],[1,"d-flex","align-items-center","justify-content-center","search"],[1,"font-500","font-banner"],["mat-icon-button","",3,"click"],[1,"font-green"],["class","mt-4 p-4",4,"ngIf"],[1,"mt-4","p-4"],[1,"row"],[1,"col-md-6"],["customer-details","",3,"customer"],["account-details","",3,"customer"],["investment-vs-interest-collection-chart","",1,"col-md-6",3,"customer"]],template:function(t,n){1&t&&(l.TgZ(0,"main",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l._uU(3,"Select a customer"),l.qZA(),l.TgZ(4,"button",3),l.NdJ("click",function(){return n.selectCustomer()}),l.TgZ(5,"mat-icon",4),l._uU(6,"search"),l.qZA(),l.qZA(),l.qZA(),l.YNc(7,J,6,3,"div",5),l.qZA()),2&t&&(l.xp6(7),l.Q6J("ngIf",n.selectedCustomer))},directives:[d.lW,Z.Hw,o.O5,m,w,E],styles:["main[_ngcontent-%COMP%]{height:calc(100vh - 36px);overflow-y:auto}main[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:5px 0;background-color:#21252929}"]}),n}(),M=u(39038),R=u(79332),Q=u(18108),Y=u(54655),L=u(38445),B=u(29768),F=u(63718),V=[{path:"",component:D,canActivate:[L.d]}],j=((P=function n(){t(this,n)}).\u0275fac=function(t){return new(t||P)},P.\u0275mod=l.oAB({type:P}),P.\u0275inj=l.cJS({providers:[A.B,R.v,Q.r,k.s,F.y],imports:[[o.ez,M.S,B.q,Y.Bz.forChild(V),c.u5,c.UX]]}),P)}}])}();