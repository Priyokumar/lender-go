(self.webpackChunkui=self.webpackChunkui||[]).push([[727],{10727:function(t,e,n){"use strict";n.r(e),n.d(e,{Customer360Module:function(){return B}});var s=n(38583),c=n(3679),o=n(62831),i=n(95756),u=n(37716),l=n(22238),a=n(51095),r=n(76627),d=n(1769);const Z=["customer-details",""];let g=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=u.Xpm({type:t,selectors:[["","customer-details",""]],inputs:{customer:"customer"},attrs:Z,decls:40,vars:6,consts:[[1,"subtitle"],[1,"row"],[1,"col-md-6"],[1,"d-flex","field"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u._uU(1,"Customer Details"),u.qZA(),u._UZ(2,"mat-divider"),u.TgZ(3,"div",1),u.TgZ(4,"div",2),u.TgZ(5,"div",3),u.TgZ(6,"label"),u._uU(7,"Customer Name :"),u.qZA(),u.TgZ(8,"div"),u._uU(9),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div",2),u.TgZ(11,"div",3),u.TgZ(12,"label"),u._uU(13,"Mobile Number :"),u.qZA(),u.TgZ(14,"div"),u._uU(15),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",2),u.TgZ(17,"div",3),u.TgZ(18,"label"),u._uU(19,"Gender :"),u.qZA(),u.TgZ(20,"div"),u._uU(21),u.qZA(),u.qZA(),u.qZA(),u.TgZ(22,"div",2),u.TgZ(23,"div",3),u.TgZ(24,"label"),u._uU(25,"Occupation :"),u.qZA(),u.TgZ(26,"div"),u._uU(27),u.qZA(),u.qZA(),u.qZA(),u.TgZ(28,"div",2),u.TgZ(29,"div",3),u.TgZ(30,"label"),u._uU(31,"Address :"),u.qZA(),u.TgZ(32,"div"),u._uU(33),u.qZA(),u.qZA(),u.qZA(),u.TgZ(34,"div",2),u.TgZ(35,"div",3),u.TgZ(36,"label"),u._uU(37,"Status :"),u.qZA(),u.TgZ(38,"div"),u._uU(39),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(9),u.Oqu(null==e.customer?null:e.customer.name),u.xp6(6),u.Oqu(null==e.customer?null:e.customer.mobileNo),u.xp6(6),u.Oqu(null==e.customer?null:e.customer.gender),u.xp6(6),u.Oqu(null==e.customer?null:e.customer.occupation),u.xp6(6),u.Oqu(null==e.customer?null:e.customer.address),u.xp6(6),u.Oqu(null==e.customer?null:e.customer.status))},directives:[d.d],styles:[""]}),t})();var m=n(60974),v=n(58322),p=n(34571),A=n(12542),q=n(11436);const T=["account-details",""];function h(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"button",15),u.NdJ("click",function(){u.CHM(t);const e=u.oxw(2).$implicit;return u.oxw(2).repay(e)}),u.TgZ(1,"mat-icon"),u._uU(2,"post_add"),u.qZA(),u.qZA()}}function f(t,e){if(1&t){const t=u.EpF();u.TgZ(0,"div",12),u.YNc(1,h,3,0,"button",13),u.ALo(2,"async"),u.TgZ(3,"button",14),u.NdJ("click",function(){u.CHM(t);const e=u.oxw().$implicit;return u.oxw(2).viewRepaymentList(e)}),u.TgZ(4,"mat-icon"),u._uU(5,"visibility"),u.qZA(),u.qZA(),u.qZA()}if(2&t){const t=u.oxw(3);let e;u.xp6(1),u.Q6J("ngIf",null==(e=u.lcZ(2,1,t.roles))?null:e.includes(t.userRole.INVESTOR))}}function b(t,e){1&t&&u._UZ(0,"mat-divider")}const _=function(t,e,n,s){return{"warning-snackbar":t,"success-snackbar":e,"info-snackbar":n,"danger-snackbar":s}};function C(t,e){if(1&t&&(u.TgZ(0,"div",4),u.YNc(1,f,6,3,"div",5),u.TgZ(2,"div",6),u.TgZ(3,"div",7),u.TgZ(4,"div",8),u.TgZ(5,"label"),u._uU(6,"Account Number :"),u.qZA(),u.TgZ(7,"div"),u._uU(8),u.qZA(),u.qZA(),u.qZA(),u.TgZ(9,"div",7),u.TgZ(10,"div",8),u.TgZ(11,"label"),u._uU(12,"Amount :"),u.qZA(),u.TgZ(13,"div"),u._uU(14),u.ALo(15,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(16,"div",7),u.TgZ(17,"div",8),u.TgZ(18,"label"),u._uU(19,"Product Name :"),u.qZA(),u.TgZ(20,"div"),u._uU(21),u.ALo(22,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(23,"div",7),u.TgZ(24,"div",8),u.TgZ(25,"label"),u._uU(26,"Interest % :"),u.qZA(),u.TgZ(27,"div"),u._uU(28),u.ALo(29,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(30,"div",7),u.TgZ(31,"div",8),u.TgZ(32,"label"),u._uU(33,"Frequency :"),u.qZA(),u.TgZ(34,"div"),u._uU(35),u.ALo(36,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(37,"div",7),u.TgZ(38,"div",8),u.TgZ(39,"label"),u._uU(40,"Monthly Interest :"),u.qZA(),u.TgZ(41,"div"),u._uU(42),u.ALo(43,"async"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(44,"div",9),u.TgZ(45,"div",8),u.TgZ(46,"label"),u._uU(47,"Status :"),u.qZA(),u.TgZ(48,"div",10),u._uU(49),u.qZA(),u.qZA(),u.qZA(),u.TgZ(50,"div",7),u.TgZ(51,"div",8),u.TgZ(52,"label"),u._uU(53,"Status :"),u.qZA(),u.TgZ(54,"div"),u._uU(55),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.YNc(56,b,1,0,"mat-divider",11),u.qZA()),2&t){const t=e.$implicit,n=e.index,s=u.oxw().ngIf,c=u.oxw();let o,i,l,a,r;u.xp6(1),u.Q6J("ngIf",(null==t?null:t.status)!==c.accountStatus.REJECTED&&(null==t?null:t.status)!==c.accountStatus.CREATED),u.xp6(7),u.Oqu(null==t?null:t.accountNo),u.xp6(6),u.Oqu(null==(o=u.lcZ(15,11,null==t?null:t.lead))?null:o.amount),u.xp6(7),u.Oqu(null==(i=u.lcZ(22,13,null==t?null:t.product))?null:i.name),u.xp6(7),u.Oqu(null==(l=u.lcZ(29,15,null==t?null:t.product))?null:l.interest),u.xp6(7),u.Oqu(null==(a=u.lcZ(36,17,null==t?null:t.product))?null:a.frequency),u.xp6(7),u.Oqu(null==(r=u.lcZ(43,19,null==t?null:t.lead))?null:r.monthlyInterest),u.xp6(6),u.Q6J("ngClass",u.l5B(21,_,t.status===c.accountStatus.CLOSED,t.status===c.accountStatus.DISBURSED,t.status===c.accountStatus.CREATED,t.status===c.accountStatus.REJECTED)),u.xp6(1),u.hij(" ",null==t?null:t.status," "),u.xp6(6),u.Oqu(null==t?null:t.status),u.xp6(1),u.Q6J("ngIf",n!==s.length-1)}}function x(t,e){if(1&t&&(u.TgZ(0,"div",1),u.TgZ(1,"div",2),u._uU(2,"Account Details"),u.qZA(),u._UZ(3,"mat-divider"),u.YNc(4,C,57,26,"div",3),u.qZA()),2&t){const t=e.ngIf;u.xp6(4),u.Q6J("ngForOf",t)}}let U=(()=>{class t{constructor(t,e,n){this.accountService=t,this.dialog=e,this.authService=n,this.accountStatus=o.dp,this.userRole=o.i4}ngOnChanges(t){this.customer&&(this.accounts$=this.accountService.getAccounts({customerId:this.customer.customerId}))}ngOnInit(){this.roles=this.authService.getUserRoles()}viewRepaymentList(t){this.dialog.open(v.u,{width:"65%",data:{accountNo:t.accountNo}})}repay(t){this.dialog.open(m.d,{width:"25%",data:t})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(p.B),u.Y36(l.uw),u.Y36(A.e))},t.\u0275cmp=u.Xpm({type:t,selectors:[["","account-details",""]],inputs:{customer:"customer"},features:[u.TTD],attrs:T,decls:2,vars:3,consts:[["class","mt-4",4,"ngIf"],[1,"mt-4"],[1,"subtitle"],["class","account",4,"ngFor","ngForOf"],[1,"account"],["class","floating-action d-flex justify-content-end align-items-center",4,"ngIf"],[1,"row","mt-3","mb-3"],[1,"col-md-6"],[1,"d-flex","field"],[1,"col-md-6","pt-2"],[1,"status",3,"ngClass"],[4,"ngIf"],[1,"floating-action","d-flex","justify-content-end","align-items-center"],["mat-icon-button","","matTooltip","Add Repayment",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","View Repayment",3,"click"],["mat-icon-button","","matTooltip","Add Repayment",3,"click"]],template:function(t,e){1&t&&(u.YNc(0,x,5,1,"div",0),u.ALo(1,"async")),2&t&&u.Q6J("ngIf",u.lcZ(1,1,e.accounts$))},directives:[s.O5,d.d,s.sg,s.mk,a.lW,q.gM,r.Hw],pipes:[s.Ov],styles:["u[_ngcontent-%COMP%]{color:#0d507e;font-weight:500}u[_ngcontent-%COMP%]:hover{cursor:pointer}.status[_ngcontent-%COMP%]{padding:0 10px;border-radius:15px;color:#fff}.account[_ngcontent-%COMP%]{position:relative}.account[_ngcontent-%COMP%]   .floating-action[_ngcontent-%COMP%]{position:absolute;top:-28px;right:0}"]}),t})();var y=n(6823),I=n.n(y),O=n(75741);const w=["investment-vs-interest-collection-chart",""],S=function(t){return{hide:t}};let k=(()=>{class t{constructor(t){this.dashboardService=t,this.data={totalInterest:0,totalPrincipal:0}}ngOnChanges(t){this.customer&&this.getSendoiDoghnutChartData()}ngOnInit(){}ngOnDestroy(){this.chart&&this.chart.destroy()}getSendoiDoghnutChartData(){this.dashboardService.getRepaymentAgainstInvestmentByCustomerId(this.customer.customerId).subscribe(t=>{this.data=t,this.drawChart()},t=>{console.log(t)})}drawChart(){this.chart&&this.chart.destroy(),this.chart=new(I())(document.getElementById("overall-customer-investment-interest-collection-chart"),{type:"doughnut",data:{labels:["Tatol investment","Interest collection"],datasets:[{label:"Population (millions)",backgroundColor:["#F76B1C","#06D8A4"],data:[this.data.totalPrincipal,this.data.totalInterest]}]},options:{legend:{position:"bottom"},title:{display:!1,text:"Sendoi Against Interest collection"}}})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(O.s))},t.\u0275cmp=u.Xpm({type:t,selectors:[["","investment-vs-interest-collection-chart",""]],inputs:{customer:"customer"},features:[u.TTD],attrs:w,decls:6,vars:6,consts:[[1,"m-2","p-3","bg-white","h-100"],[1,"title","mb-4","text-center","font-500"],[1,"text-center","pt-4","mt-4","font-500","font-banner","no-data",3,"ngClass"],["id","overall-customer-investment-interest-collection-chart",3,"ngClass"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2," Investment Vs Interest Collection "),u.qZA(),u.TgZ(3,"div",2),u._uU(4," No data available! "),u.qZA(),u._UZ(5,"canvas",3),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngClass",u.VKq(2,S,e.data.totalInterest||e.data.totalPrincipal)),u.xp6(2),u.Q6J("ngClass",u.VKq(4,S,0==e.data.totalInterest&&0==e.data.totalPrincipal)))},directives:[s.mk],styles:[".hide[_ngcontent-%COMP%]{visibility:hidden}.no-data[_ngcontent-%COMP%]{opacity:.3}"]}),t})();function N(t,e){if(1&t&&(u.TgZ(0,"div",6),u.TgZ(1,"div",7),u.TgZ(2,"div",8),u._UZ(3,"div",9),u._UZ(4,"div",10),u.qZA(),u._UZ(5,"div",11),u.qZA(),u.qZA()),2&t){const t=u.oxw();u.xp6(3),u.Q6J("customer",t.selectedCustomer),u.xp6(1),u.Q6J("customer",t.selectedCustomer),u.xp6(1),u.Q6J("customer",t.selectedCustomer)}}let E=(()=>{class t{constructor(t){this.dialog=t,this.customerCtrl=new c.NI("",c.kI.required)}ngOnInit(){}selectCustomer(){this.dialog.open(i.t,{data:{query:{status:o.WE.ACTIVE}},width:"65%"}).afterClosed().subscribe(t=>{t&&(this.selectedCustomer=t,this.customerCtrl.setValue(t.customerId))})}}return t.\u0275fac=function(e){return new(e||t)(u.Y36(l.uw))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-customer360-layout"]],decls:8,vars:1,consts:[[1,"m-4","bg-white"],[1,"d-flex","align-items-center","justify-content-center","search"],[1,"font-500","font-banner"],["mat-icon-button","",3,"click"],[1,"font-green"],["class","mt-4 p-4",4,"ngIf"],[1,"mt-4","p-4"],[1,"row"],[1,"col-md-6"],["customer-details","",3,"customer"],["account-details","",3,"customer"],["investment-vs-interest-collection-chart","",1,"col-md-6",3,"customer"]],template:function(t,e){1&t&&(u.TgZ(0,"main",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u._uU(3,"Select a customer"),u.qZA(),u.TgZ(4,"button",3),u.NdJ("click",function(){return e.selectCustomer()}),u.TgZ(5,"mat-icon",4),u._uU(6,"search"),u.qZA(),u.qZA(),u.qZA(),u.YNc(7,N,6,3,"div",5),u.qZA()),2&t&&(u.xp6(7),u.Q6J("ngIf",e.selectedCustomer))},directives:[a.lW,r.Hw,s.O5,g,U,k],styles:["main[_ngcontent-%COMP%]{height:calc(100vh - 36px);overflow-y:auto}main[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{padding:5px 0;background-color:#21252929}"]}),t})();var J=n(39038),D=n(79332),M=n(18108),P=n(54655),R=n(38445),Q=n(29768),Y=n(63718);const L=[{path:"",component:E,canActivate:[R.d]}];let B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({providers:[p.B,D.v,M.r,O.s,Y.y],imports:[[s.ez,J.S,Q.q,P.Bz.forChild(L),c.u5,c.UX]]}),t})()}}]);