<main>
  <div class="m-3">
    <div class="d-flex justify-content-between p-1 ps-4 bg-gold">
      <span class="font-400 font-banner" style="line-height: 35px"
        >Repayments</span
      >
      <button class="btn btn-save" [routerLink]="['/repayments/add']" *ngIf="(roles | async)?.includes(userRole.INVESTOR)">
        <mat-icon class="white-icon">add</mat-icon>&nbsp;Add Repayment
      </button>
    </div>
    <div class="row">
      <div class="col-md-12 p-0 table-header mb-5">
        <div class="no-shadow w-100">
          <table
            mat-table
            [dataSource]="dataSource"
            matSort
            [ngStyle]="{ display: dataSource ? '' : 'none' }"
          >
            <ng-container matColumnDef="repaymentId">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Repayment ID
              </th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ row.repaymentId }}
              </td>
            </ng-container>

            <ng-container matColumnDef="accountNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Account Number
              </th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ row.accountNo }}
              </td>
            </ng-container>

            <ng-container matColumnDef="customerName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Customer Name
              </th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ (row.customer | async)?.name }}
              </td>
            </ng-container>

            <ng-container matColumnDef="dateOfPayment">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Date Of Payment
              </th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ row.dateOfPayment | date }}
              </td>
            </ng-container>

            <ng-container matColumnDef="amountPaid">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Amount Paid
              </th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ row.amountPaid | inr }}
              </td>
            </ng-container>

            <ng-container matColumnDef="dueAmount">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>
                Due Amount
              </th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ row.dueAmount }}
              </td>
            </ng-container>

            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
              <td mat-cell *matCellDef="let row" class="name-class">
                {{ row.status }}
              </td>
            </ng-container>

            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
              <td mat-cell *matCellDef="let row" class="text-right">
                <mat-icon
                  style="color: rgb(6, 80, 51); cursor: pointer"
                  [routerLink]="'/repayments/' + row.id + '/edit'"
                >
                  edit
                </mat-icon>
               <!--  &nbsp;
                <mat-icon
                  style="color: firebrick; cursor: pointer"
                  (click)="delete(row.id)"
                  >delete</mat-icon
                > -->
              </td></ng-container
            >

            <tr mat-header-row *matHeaderRowDef="columns; sticky: true"></tr>
            <tr
              mat-row
              *matRowDef="let row; columns: columns; let i = index"
            ></tr>
          </table>
          <div
            class="d-flex justify-content-center align-items-center"
            style="height: 40vh"
            *ngIf="!dataSource || !dataSource.data"
          >
            <div>
              <h4 class="font-grey font-300">No lead to display.</h4>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
